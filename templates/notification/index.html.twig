{% extends 'base.html.twig' %}

{% set dominio = app.request.attributes.get('dominio') %}

{% block title %}Notificaciones
{% endblock %}

{% block stylesheets %}
	{{ parent() }}
	<link rel="stylesheet" href="{{ asset('css/admin-theme.css') }}">
{% endblock %}

{% block body %}
	{# Unified Toolbar #}
	<section class="user-toolbar">
		<div class="container-fluid px-5">
			<div
				class="toolbar-content">
				{# Left: Title #}
				<div class="toolbar-left">
					<h1 class="page-title">Notificaciones</h1>
				</div>

				{# Right: Actions #}
				<div class="toolbar-right">
					<button class="btn-action btn-action-success" data-bs-toggle="modal" data-bs-target="#modalNew" title="Nueva Notificación">
						<i class="fas fa-plus"></i>
						<span>Nueva</span>
					</button>
				</div>
			</div>
		</div>
	</section>

	{# Main Content #}
	<div class="container-fluid px-5 mt-4">
		<div class="table-wrapper">
			<table id="notification-datatable" class="data-table" style="width:100%">
				<thead>
					<tr>
						<th class="text-center" style="width: 120px;">Acciones</th>
						<th class="text-center">Título</th>
						<th class="text-center">Mensaje</th>
						<th class="text-center">Regiones</th>
						<th class="text-center">Empresas</th>
					</tr>
				</thead>
				<tbody></tbody>
			</table>
		</div>
	</div>

	{# Modals #}
	{% include 'notification/_modal_new.html.twig' %}
	{% include 'notification/_modal_show.html.twig' %}
	{% include 'notification/_modal_edit.html.twig' %}
	{% include 'notification/_modal_stats.html.twig' %}
{% endblock %}

{% block javascripts %}
	{{ parent() }}
	<script>
		window.notificationConfig = {
dominio: '{{ dominio }}',
datatableUrl: '{{ path('app_notification_datatable', {'dominio': dominio}) }}',
csrfTokenDelete: '{{ csrf_token_delete }}' // Usar la variable del controlador
};
	</script>
	<script src="{{ asset('js/notification-index.js') }}"></script>
{% endblock %}
